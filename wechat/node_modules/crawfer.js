/**
 * @Author: chenxuan
 * @Date:   2017-05-26T18:51:06+08:00
 * @Project: 小爬虫
 * @Filename: crawfer.js
 * @Last modified by:   chenxuan
 * @Last modified time: 2017-05-26T19:24:14+08:00
 */
'use strict';
const http = require('http');
const cheerio = require('cheerio'); //用法类似jq
var url = "http://www.jianshu.com/p/dd97cbb3c22d";
var filterData = function(html) {
  var $ = cheerio.load(html),
    chapters = $(".show-content"),
    needText = [],
    linkText = chapters.children('ul').find('a');
  linkText.each(function() {
    var text = $(this).text();
    needText.push(text);
  });,
  return needText;
};
http.get(url, function(res) {
  var html = "";
  res.on('data', function(data) {
    html += data;
  });
  res.on('end', function() {
    var real = filterData(html);
    console.log(real);
  });
}).on('error', function(error) {
  console.log("error:" + error);
});
